# 4.1 React.js 소개

### React.js
- Meta가 개발한 프론트트엔드를 위한 오픈소스 JavaScript 라이브러리
- 복잡한 대규모 웹 서비스의 UI를 좀 더 편하고 좀 더 빠르게 개발할 수 있도록 만들어진 기술
- 가장 많은 인기를 누리고 있는 프론트엔드 기술
- React의 기술적인 특징
    1. 컴포넌트를 기반으로 UI를 표현한다.
    2. 화면 업데이트 구현이 쉽다.
    3. 화면 업데이트가 빠르게 처리된다.

### React 기술적 특징 1. 컴포넌트를 기반으로 UI를 표현한다.
- 컴포넌트 (Component) : "구성요소"라는 뜻으로, 화면을 구성하는 요소, UI를 구성하는 요소를 만ㄹ함
- 만약 구현해야 되는 웹페이지가 헤더, 메인, 푸터 3가지 부분으로 나누어져 있다고 하면 리액트에서는 각각의 영역들을 분리해서 Header.js, Main.js, Footer.js 각각의 자바스크립트 파일에 component라는 단위로 나눠서 모듈화해서 보관할 수 있기 때문에 웹페이지를 레고를 조립하듯 여러 개의 컴포넌트들을 합쳐서 만들어낼 수 있음
- 화면의 구성요소, 즉 컴포넌트를 자바스크립트 파일로 모듈화 할 수 있다는 것은 중복 코드를 제거하는 관점에서 매우 큰 장점이 됨
- 컴포넌트를 이용하지 않는다면 헤더처럼 여러 페이지에 공통으로 쓰이는 요소들을 구현할 때 특별한 방법을 사용하지 않으면 모듈화할 방법이 딱히 없기 때문에 일일이 헤더를 사용하는 모든 페이지에 HTML로 직접 헤더를 마크업 해줘야함 -> 중복 코드가 발생, 페이지 수가 늘어날수록 코드 수정이 어려워짐
- 마크업 (Mark UP) : UI 구현이라고 생각하면 됨

- 리액트에서는 기본적으로 페이지의 모든 요소들을 컴포넌트라는 단위로 모듈화해서 개발하기 때문에 여러 페이지에서 공통으로 사용되는 요소가 필요할 떄 컴포넌트를 만들어 여러 페이지에서 불러와서 사용하도록 만들면 되기 때문에 애초에 중복 코드가 발생하지 않게 됨
- 수정사항이 발생해도 컴포넌트 하나만 수정해주면 되기 때문에 유지보수 차원에서도 굉장히 용이함

### React 기술적 특징 2. 화면 업데이트 구현이 쉽다.
- 업데이트란? 사용자의 행동(클릭, 드래그)에 따라 웹 페이지가 스스로 모습을 바꿔 상호작용하는 것
- React에서는 화면 업데이트 구현이 쉬움
- Why? 선언형 프로그래밍 방식으로 동작하기 때문
- 선언형 프로그래밍이란? 불필요한 과정은 생략하고 이루고자하는 목적만 간결히 명시하는 방법
- 명령형 프로그래밍? 목적을 이루기 위한 모든 일련의 과정을 설명하는 방식 (<-> 선언형 프로그래밍)
- 명령형 프로그래밍에는 JavaScript가 있으며 모든 과정을 하나하나 다 설명해야 하므로 코드가 길고 복잡함

- 선언형 프로그래밍 동작 방식 원리
- 리액트에서는 페이지를 컴포넌트 단위로 나눠서 개발하는데 이때 각각의 컴포넌트에는 State라는 현재 이 컴포넌트의 상태를 저장하는 특수한 변수를 저장할 수 있음
- State 값이 바뀌면 컴포넌트가 바뀐 state 값에 따라서 각각 다른 UI를 화면에 렌더링하도록 설정해 줄 수 있음
- 렌더링(Rendering) : UI 요소를 화면에 그려내는 것
- 화면에 업데이트가 필요할 때 컴포넌트가 가지고 있는 state 변수의 값만 바꾸면 자동으로 다른 버전의 UI를 렌더링하도록 설정할 수 있어서 훨씬 더 편하고 간결하게 업데이트 구현 가능
- 정리 : 리액트에서는 업데이트를 위한 복잡한 동작을 직접 정의할 필요없이 특정 변수의 값을 바꾸는 것만으로도 선언형 방식으로 해당 변수 값에 따라 화면을 업데이트 시킬 수 있다.

### React 기술적 특징 3. 화면 업데이트가 빠르게 처리된다.
- 브라우저는 HTML과 CSS로 작성한 웹페이지를 여러 단계의 과정을 거쳐서 화면에 렌덜이 시켜주는데, 이때 브라우저의 전체 렌더링 과정을 웹 페이지를 렌더링하기 위해 반드시 거쳐야만 하는 중요한 경로라는 뜻에서 영어로는 Critical Rendering Path라고도 부름
- Critical Rendering Path는 앞으로 프론트엔드 개발에서 매우 중요한 기본개념

#### Critical Rendering Path
1. 첫 번째 단계에서는 HTML과 CSS를 각각 DOM과 CSS Object Model(CSSOM)이라는 것으로 변환하게 됨
- DOM(Document Object Model)은 HTML 코드를 브라우저가 자신이 이해하기 더 쉬운 방식으로 변환한 객체
- HTML 문서를 일종의 객체 모델로 변환했다고 해서 문서 객체 모델, 즉 Document Object Model, DOM이라고 부름
- CSS Object Model도 DOM과 비슷하게 CSS 코드를 브라우저가 자신이 더 이해하기 쉬운 형태로 변환한 것
2. 다음으로 DOM과 CSSOM을 합쳐서 Render Tree라는 웹 페이지의 청사진(설계도)을 만듦
- render tree는 웹 페이지의 청사진 또는 설계도 정도의 역할을 함
- Why? DOM에는 HTML로 표현한 요소들의 위치나 배치, 모양 등에 관한 정보가 있고, CSSOM에는 CSS로 표현한 요소들의 스타일과 관련된 모든 정보가 있을 것 -> 이 두 개를 합쳐서 만든 render tree에는 화면에 나타나야하는 즉, 화면에 렌더링 되어야 하는 요소들의 모든 정보가 다 포함이 되어 있음 -> 따라서 render tree를 웹 페이지의 청사진이라고 부름
3. render tree를 만든 후 Layout 작업을 수행
- 레이아웃 작업은 위치들을 계산해서 요소의 배치를 잡는 작업 -> 웹페이지라는 공간 안에 render tree에 포함되어 있는 요소들의 배치를 잡아보는 것
4. 마지막으로 Painting 작업을 진행
- Painting은 요소르 실제로 화면에 그려내는 과정
- 해당 과정을 거치면 웹페이지가 실제로 나타나게됨

#### 화면에 업데이트는 어떻게 발생하게 될까?
- 화면의 업데이트는 JavaScript가 DOM을 수정하게 되면 발생
- DOM이 수정되면 브라우저는 Critical Rendering Path의 전체 단계를 다시 진행함
- render tree를 다시 생성하고 레이아웃을 다시 잡고 페인팅을 다시 진행
- 그럼으로써 화면에 그려지는, 즉 렌더링되는 요소가 변경이 되면서 업데이트가 실제로 이루어지게 되는 것
- 주의! Critical Rendering Path의 전체 과정들 중에 3단계 layout과 4단계 painting은 꽤나 오래 걸리는 과정으로, 특별히 DOM이 수정되어서 레이아웃이 다시 진행되는 것을 Reflow, 페인팅 과정이 다시 진행되는건 Repaint라고 부름 -> 별도로 부르는 이름이 있을정도로 오래 걸리는 과정이다
- 자바스크립트로 DOM을 순식간에 여러번 수정하게 되면 render tree 이후 과정을 여러번 다시 진행하는 것이므로 reflow, repaint도 여러번 수행되어 성능이 크게 악화됨
- 심할 경우 브라우저에서 응답 없음 페이지를 띄우면서 마비가 되어버리는 현상이 발생할 수도 있음
- DOM을 자주 수정하는 코드를 작성하면 안됨
- 자바스크립트로 DOM을 직접 수정해서 업데이트를 구현할 때에는 DOM 수정 횟수를 최소화해야 되기 때문에 동시에 발생하는 다양한 업데이트들이 있을 때 업데이트들이 한 번 한 번 다 DOM을 수정시키도록 만드는 것이 아니라 어딘가의 변수나 등등 장소에 업데이트들을 다 모아두었다가 한 번만 DOM을 수정할 수 있도록 신경써줘야 함 -> But. 서비스의 규모가 커질 수록 점점 힘들어짐
- 그래서 React는 이 과정을 자동으로 진행해줌

#### React는 화면 업데이트가 빠르게 처리된다 (Feat. Virtual DOM)
- 동시에 발생한 업데이트들을 모아서 DOM 수정 횟수를 최소화 하는 작업을 신경쓰지 않아도 자동으로 처리해줌
- 그렇기 때문에 리액트를 쓸 때는 아무리 많은 업데이트를 동시에 발생시켜도 대부분의 상황에 충분히 빠른 속도로 업데이트를 구현할 수 있도록 도와줌
- 리액트는 내부적으로 virtual DOM이라는 가상 DOM을 이용하고 있기 때문
- Virtual DOM이란? 실제 브라우저가 렌더링하는 DOM을 JavaScript 객체로 copy 해놓은 것
- 리액트에서는 virtual DOM을 이용해서 업데이트가 발생하면 실제 DOM을 바로 수정하지 않고 가상 DOM을 먼저 수정하도록 만듦
- 실제 DOM 대실 자바스크리븥 객체인 Virtual DOM에 먼저 동시에 발생한 업데이트들을 순서대로 다 반영해봄
- 이후 동시에 발생한 업데이트들이 다 모였다라고 하면 모인 업데이트들을 한 번에 실제 DOM에 반영해줌
- 그럼으로써 virtual DOM이 일종의 버퍼 역할을 해서, 일종의 업데이트들을 모아두는 장소 역할을 해서 동시에 아무리 많은 수의 업데이트가 발생한다고 하더라도 virtual DOM에 한번 다 모였다가 반영되기 때문에 결국 최소한의 횟수로 DOM이 수정되고 결론적으로 좋은 업데이트 성능을 어느정도 보장해준다.

# 4.2 첫 React App 생성하기
- React Application이라고 부르는 이유? 리액트로 만들어진 대다수의 웹 서비스들은 단순한 웹 페이지의 기능을 넘어서 사실상 어플리케이션에 가까울 정도로 매우 다양한 기능들을 제공하고 있기 때문 -> 마치 단순한 웹이 아니라 웹 브라우저 위에서 동작하는 애플리케이션 같다라고 해서 보통 리액트 앱이라고 부름
- 리액트 앱은 매우 다양한 방식으로 생성할 수 있는데, 사실 리액트 또한 NPM에 등록된 자바스크립트의 라이브러리이기 때문에 이전 섹션에서 했었던 것처럼
1. Node.js 패키지를 하나 만들고
2. 이 패키지에 React라는 라이브러리를 설치하고
3. 마지막으로 리액트를 좀 더 편하게 사용하기 위한 여러가지 추가적인 도구들을 설치하고 설정하면 리액트 앱을 만들 수 있음
- 문제는 마지막 과정인 기타 도구 설치 및 설정이 상당히 복잡하고 까다로움
- 위 방식은 권장하지 않음

- 대신 훨씬 쉬운 방식인 Vite라는 차세대 프론트엔드 개발 툴을 이용해 기본 설정이 적용된 React App을 생성
- 참고 : Vite은 리액트 공식 문서에도 권장되고 있음, 그렇기 때문에 오늘날 대부분의 리액트 앱은 Vite를 이용해서 만들어진다.

### 실습
- 터미널에서 Vite을 이용해 새로운 리액트 앱 생성 : 터미널에 npm create-react-app@latest 입력
- 프로젝트 이름을 바로 물어볼 수도 있고 아니면 need to install the following packages라고 해서 어떤 패키지를 설치해도 되냐라는 질문이 나올 수도 있음
