# SQL

### Relational Database
- 외래키를 통해 관계가 형성됨
- Field = Column, Attribute : 각 필드에는 고유한 데이터 형식(타입)이 지정됨
- Record = Row, Tuple : 각 레코드에는 구체적인 데이터 값이 저장됨
- Database = Schema : 테이블의 집합
- PK : 레크드의 식별자로 활용됨
- FK : 각 레코드에서 서로 다른 테이블 간의 관계를 만드는 데 사용, 다른 테이블의 기본키를 참조

### Single Table Queries
- syntax에서 enter는 특별한 의미 없음 (가독성 향상 위함)
- ';'이 중요

#### ORDER BY
- clause : 절
- FROM 절 뒤에 위치
- 오름차순 (ASC, 기본 값), 내림차순(DESC)으로 정렬

#### DISTINCT
- SELECT 키워드 바로 뒤에 작성해야 함
- SELECT DISTINCT 키워드 다음에 고유한 값을 선택하려느 하나 이상의 필드fh 지정

#### WHERE
- NULL은 독특한 특징을 가지고 있음
- NULL값 비교는 '='를 쓰지 않고 'IS'를 사용
- ex. WHERE Company IS NULL;

#### operator
- LIKE는 Wildcards('%', '_')와 함께 사용
- % : 0개 이상의 문자열과 일치하는지 확인 = 존재하거나 없을수도 있음
- '_' : 단일 문자와 일치하는지 확인

#### LIMIT
- OFFSET이 없으면 처음부터 조회
- 숫자 작성 주의! 4번째부터 7번째 데이터 조회 -> 3, 4 (3번 인덱스부터 4개)

#### GROUP BY
- 레코드를 그룹화하여 요악본 생성
- '집계 함수'와 함께 사용
- Aggregation Functions (집계 함수) : SUM, AVG, MAX, MIN, COUNT
- From 및 Where절 뒤에 작성
- 그룹화 먼저 하고, 그것에 대한 연산 진행
- 연산 결과의 이름을 AS로 바꿨다면 ORDER BY(or HAVING)에서도 바꾼 이름 사용해야함
- 집계 항목에 대한 세부 조건은 WHERE절이 아닌 HAVING 절을 사용해야 함

#### AS
- AS 뒤에 오는 별칭에 대해 따옴표(')를 사용할지 말지는 주로 별칭의 이름에 공백이 있거나 특수 문자가 포함된 경우에 따라 다름
1. 따옴표 없이 사용할 때
  : 별칭이 알파벳, 숫자, 언더스코어(_)로만 이루어져 있을 경우 따옴표 없이 사용할 수 있다.
```sql
SELECT column_name AS alias_name
FROM table_name;
```
2. 따옴표를 사용할 때
  : 별칭에 공백이나 특수 문자가 포함되어 있는 경우, 따옴표(" 또는 ')를 사용해야 한다.
  - SQL의 표준에 따라, 일반적으로 큰따옴표(")를 사용
```sql
SELECT column_name AS "alias name with spaces"
FROM table_name;
```

### Managing Tables
#### CREATE
- AUTOINCREMENT : 내가 값을 넣지 않으면 자동으로 값을 증가시키겠다는 의미
- pk : 꼭 속성값이 하나만 있지는 않음

#### ALTER
- SQLite는 ALTER TABLE DROP COLUMN 기능을 지원하지 않음 (But. 대부분의 프로그램에서는 제공)
- 여러개의 컬럼을 한번에 추가할 수 없음, 한 컬럼당 ALTER문 하나씩 작성해야 함
```sql
-- 아래와 같이 작성할 수 없음
ALTER TABLE examples
ADD COLUMN
  Age INTEGER NOT NULL DEFAULT 0;
ADD COLUMN
  Address VARCHAR(100) NOT NULL DEFAULT 'defaut value';
```

#### INSERT
- INSERT INTO 테이블명 (필드명, ... , )
- 필드명의 순서는 꼭 테이블 순서대로 쓰지 않아도 됨, 값과 매칭은 잘 시켜주어야 함
```sql
INSERT INTO articles
VALUES ('hello', 'world', '2024-10-10')
```
- 위 코드는 오류 발생 -> articles 다음 필드명을 적어주지 않아서 모든 필드값을 values로 넣어줘야함 (id가 빠짐)
```sql
INSERT INTO articles
VALUES (10, 'hello', 'world', '2024-10-10')
```
- id값이 현재 테이블에 있는 수와 겹치지 않는 한 순서를 지키지 않고 숫자를 마음대로 쓸 수 있음
- 이후 값이 추가되면 10 이후의 숫자들로 id 값이 생성됨
- 날짜 필드에 지정된 시간이 아닌 현재 시간을 넣고 싶으면 DATE() 사용

#### UPDATE
- WHERE 조건 쓰지 않으면 모든 필드값이 바뀜

#### DELETE
- order by는 select밖에 쓸 수 없음
- 정렬 후 가장 오래된 것을 지우고 싶다면
- ORDER나 LIMIT을 이용해 값을 가져오면 IN 같은 연산자 사용

### join
- inner join은 데이터 개수가 줄어들 수 있지만 outer join(left join, right join)은 데이터 개수가 줄어들지 않음